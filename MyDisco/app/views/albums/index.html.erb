<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="shortcut icon" href="assets/favicon.png">
  <title>MyDisco</title>
</head>

<body>

<header>
  <div class="headerContainer">
    <% if @discogs.authenticated? %>
      <div class="searchAlbum">
        <%= form_with(scope: :post, url: albums_path) do %>
          <%= text_field_tag 'info', nil, class: "searchAlbumInput", placeholder: "+ Album and artist name" %>
          <%= select_tag 'stream_id', options_from_collection_for_select(@streams, "id", "name"), class: "streamsList" %>
          <%= submit_tag 'Add Album', class: "addAlbumBtn" %>
        <% end %>
      </div>
    <% else %>
      <a href="/discogs_wrapper/authenticate" class="authenticateDiscogs" type="button">Authenticate Discogs.com account</a>
    <% end %>
  </div>
</header>

<div class="sidebar">
  <%= link_to streams_path, class:"mydiscoLogo-link" do %>
    <img src="assets/mydisco_logo.svg" alt="MyDisco Logo" class="mydiscoLogoImg">
  <% end %>

  <div class="sidebarMenuContainer">
    <%= link_to streams_path, class:"sidebarMenuOption1Container" do %>
      <svg class="sidebarMenuOption1Icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
        <g fill="#3C3C3C" fill-rule="evenodd">
          <path d="M27.966572 18.7898656C26.6922191 24.4560815 21.6465396 28.7052383 15.6230101 28.7052383 10.7270101 28.7052383 6.48055172 25.8955601 4.37439351 21.8023625 3.9456714 21.9245621 3.50351318 22.0108513 3.0370142 22.0108513 2.18625558 22.0108513 1.39800406 21.7729695.698028398 21.3911853 2.90933874 27.5297108 8.75573225 31.937499 15.6230101 31.937499 23.5348641 31.937499 30.0951886 26.0922525 31.2916511 18.4796415 30.6545071 18.7826965 29.9502475 18.9657678 29.2000974 18.9657678 28.7714402 18.9657678 28.3637485 18.893165 27.966572 18.7898656zM3.54648276 12.1684725C5.16660446 7.01973116 9.96718864 3.27618737 15.6230751 3.27618737 20.3660852 3.27618737 24.5012252 5.90963747 26.6704746 9.79454175 27.4125112 9.34536864 28.2717079 9.0707943 29.2002272 9.0707943 29.4559026 9.0707943 29.7009331 9.10833401 29.9464828 9.14626477 27.3893387 3.77358859 21.9398621.0436659878 15.6230101.0436659878 7.81572414.0436659878 1.32056795 5.7340611 0 13.197556.84063286 12.5312261 1.88644219 12.1167902 3.0370142 12.1167902 3.2111643 12.1167902 3.37661663 12.1504847 3.54648276 12.1684725z"/>
          <path d="M3.0370142,19.8559022 C4.00331034,19.8559022 4.8520568,19.3593483 5.35081542,18.6078371 L7.69304665,18.6078371 L10.3770223,18.6078371 L12.5199838,24.5404807 C12.7430101,25.1569532 13.3144016,25.5766029 13.9671237,25.6041059 C14.6599594,25.6051487 15.2329736,25.2390713 15.4950751,24.663332 L20.5922272,13.5277882 L21.390929,14.804334 C21.6884706,15.278664 22.2270183,15.5964481 22.7687465,15.5607332 L24.5366653,15.5437882 L26.8631886,15.5218248 C27.3577282,16.2952342 28.2172495,16.8107536 29.2001623,16.8107536 C30.7365517,16.8107536 31.9812414,15.5596904 31.9812414,14.0180204 C31.9812414,12.4753727 30.7365517,11.2256782 29.2001623,11.2256782 C28.3188316,11.2256782 27.5423935,11.6453279 27.0327951,12.2870876 L24.5932657,12.3102892 L23.6386531,12.3197393 L21.7366329,9.27667617 C21.4221501,8.77490835 20.8520568,8.48462729 20.2695659,8.52347047 C19.6783773,8.56244399 19.1574199,8.92226477 18.911286,9.46189817 L14.2080649,19.7348758 L13.0186775,16.4403096 C12.7872779,15.8015479 12.1836268,15.3752505 11.5054604,15.3752505 L7.64806491,15.3752505 L5.23787424,15.3752505 C4.73061258,14.7083992 3.93846653,14.271609 3.0370142,14.271609 C1.50094929,14.271609 0.255870183,15.5216945 0.255870183,17.0630387 C0.255870183,18.6036008 1.50094929,19.8559022 3.0370142,19.8559022 Z"/>
        </g>
      </svg>
      <h3 class="sidebarMenuOption2Label">My Streams</h3>
    <% end %>
    <%= link_to albums_path, class:"sidebarMenuOption2Container" do %>
      <svg class="sidebarMenuOption2Icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
        <g fill="#8A4FFF">
          <path fill-rule="nonzero" d="M3,3 L3,29 L29,29 L29,3 L3,3 Z M0,0 L32,0 L32,32 L0,32 L0,0 Z"/>
          <path fill-rule="nonzero" d="M16,26 C21.5228475,26 26,21.5228475 26,16 C26,10.4771525 21.5228475,6 16,6 C10.4771525,6 6,10.4771525 6,16 C6,21.5228475 10.4771525,26 16,26 Z M16,29 C8.82029825,29 3,23.1797017 3,16 C3,8.82029825 8.82029825,3 16,3 C23.1797017,3 29,8.82029825 29,16 C29,23.1797017 23.1797017,29 16,29 Z"/>
          <circle cx="16" cy="16" r="2.5"/>
        </g>
      </svg>
      <h3 class="sidebarMenuOption1Label">Albums</h3>
    <% end %>
  </div>
</div>


<div class="pageContent">
  <div class="pageTitleContainer">
    <% @stats.each do |stat| %>
      <h3><%= stat[1] %>%  <%= stat[0] %></h3>
    <% end %>
    <h1 class="pageTitleLabel">My Albums</h1>
  </div>

  <div class="AlbumGridContainer">
    <% @albums.order!('created_at DESC').each do |album| %>
      <%= link_to album, class:"gridCell Cell1" do %>
        <%= image_tag(album.cover_url, alt: "", class: "albumArt", height: '192', width: '32') %>
        <h3 class="albumArtist"><%= album.artists.first.name %></h3>
        <h4 class="albumTitle"><%= album.name %></h4>
      <% end %>
    <% end %>
  </div>
</div>

</body>

</html>
